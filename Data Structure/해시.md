# 해시(Hash)

## 1. 해시(Hash)
1. 해시란
    - 데이터를 저장하고 검색할 때 사용하는 자료구조 중 하나
    - 다양한 길이를 가진 키를 고정된 길이를 가진 값으로 매핑(Mapping)한 값
    - 키에 대한 해시값을 사용하여 값을 저장하고, Key-Value 쌍의 개수에 따라 동적으로 크기가 증가하는 associate array
    - 키에 대한 해시값을 구하는 과정을 해싱(Hashing)이라고 하며, 이때 사용하는 함수가 해시 함수(Hash Function)

## 2. 해시 함수(Hash Function)
1. 해시 함수란
    - 키에 대한 해시값을 만드는 함수로, 임의의 길이 데이터를 고정된 길이의 데이터로 매핑하는 함수/알고리즘
    - 계산이 복잡하지 않고 키값에 대해 중복 없이 해시값을 고르게 만들어 내는 함수가 좋은 함수(충돌이 일어나지 않을수록 좋음)
    - 파이썬에서는 내장함수인 hash()를 사용
    - 대표적인 방법
        - 나눗셈법(Division Method)
            - 원소를 해시 테이블의 크기로 나누어 나머지 값을 테이블의 주소로 사용하는 방법
            - 테이블의 크기보다 원소의 개수가 많으면 충돌 발생
        - 곱하기 방법(Multiplication Method)
            - 숫자 키 k, A는 0 < A < 1 사이의 실수 일때 'h(k) = (k * a mod 1) * m'으로 계산
            - 2진수 연산에 최적화된 컴퓨터 구조를 고려한 해시 함수
        - 유니버설 해싱(Universal Hashing)
            - 여러개의 해시 함수를 만들고, 이 해사 함수의 집합 H에서 무작위로 해시 함수를 선택해 해시값을 만드는 기법
            - 서로 다른 해시 함수가 서로 다른 해시값을 만들어내기에 같은 공간에 매핑할 확률을 줄이는 것이 목적
    - 사용 용도
        - 메시지(중요 정보)의 무결성 확인
        - 전자 서명 생성
            - 메시지에 대한 전자 서명이 아니고, 그 해시값에 대해서만 전자 서명을 함
        - 메시지 인증 코드의 생성
            - 메시지 내용의 무결성 확인(변경 검출) 및 메시지 송신자가 진짜인지 인증(인증 확인)
        - 일회용 패스워드(OTP)의 생성
        - 세션 키 도출
        - 소프트웨어 배포 시 변경 검출
    - 대표적인 알고리즘
        - MD5
            - 임의의 길잇값을 입력받아 128비트 길이의 해시값을 출력하는 알고리즘
            - 단방향 암호화이기에 출력값에서 입력값을 복원하는 것은 불가능하며 서로 다른 입력값에서 같은 출력값이 나올 확률은 극히 낮음
        - SHA
            - 1993년부터 미국 NSA가 제작하고 미국 국립 표준 기술연구소(NIST)에서 채택한 암호학적 해시 함수

## 3. 해시 테이블(Hash Table)
1. 해시 테이블이란
    - 해시함수를 사용하여 키를 해시값으로 매핑하고, 이 해시값을 주소 또는 색인 삼아 데이터(value)를 key와 함께 저장하는 자료구조
    - 파이썬에서는 기본적으로 제공되는 딕셔너리(Dictionary)가 같은 구조
    - 데이터가 저장되는 공간을 버킷, 슬롯이라고 함<br><br>

2. 해시 테이블의 장점
    - Key-Value가 1:1로 매핑되어 있기에 데이터의 삽입, 삭제, 검색이 빠름(평균 시간 복잡도 : O(1))
    - 적은 리소스로 많은 데이터를 효율적으로 관리 가능<br><br>

3. 해시 테이블의 단점
    - 해시 충돌 발생 가능 : 해시 충돌이 발생하는 경우, 평균 시간 복잡도가 최악의 경우 O(N)
    - 공간 복잡도가 커짐 : 데이터가 저장되기 전에 저장 공간을 미리 만들었지만, 공간에 채워지지 않는 경우가 발생
    - 순서가 있는 배열에는 어울리지 않음
    - 해시 함수 의존도가 높아짐 : 해시 함수가 복잡하다면, 해시를 만드는 데 오래 걸림

## 4. 해시 충돌(Hash Collision)
1. 해시 충돌이란
    - 키에 대한 해시값이 같은 경우 = 사용하고자하는 해시 버킷이 이미 사용중인 경우
        - A, B 두 가지 키가 있다고 가정했을 때, A와 B를 해시 함수로 해시값을 얻었는데 해시값이 같은 경우
        - 해시 함수로 해시를 만드는 과정에서 서로 다른 키가 같은 해시로 변경되면 같은 공간에 2개의 값이 저장되므로, Key-Value가 1:1로 매핑되어야 하는 해시 테이블의 특성에 위배됨<br><br>

2. 해시 충돌 해결 방법
    - 체이닝(Chaining)
        - 체이닝이란
            - 버킷에서 충돌이 발생하면 기존값과 새로운 값을 연결 리스트(Linked List)로 연결하는 방법
        - 체이닝 장점
            - 충돌이 발생하면 그때 공간을 만들어서 연결해 주면 되기에 미리 충돌에 대비해서 공간을 많이 잡아놓을 필요가 없음
        - 체이닝 단점
            - 같은 해시에 자료들이 많이 연결되면 검색 효율이 떨어짐
            - 개방주소법을 이용하여 해결 가능
    - 개방주소법(Open Addressing)
        - 개방주소법이란
            - 충돌이 발생하면 비어 있는 해시에 데이터를 저장하는 방법
        - 비어 있는 해시 찾아가는 방법
            - 선형 탐색(Linear Probing)
                - 해시값에서 고정 폭으로 건너뛰면서 비어 있는 해시가 나오면 저장하는 방법
                - 특정 해시값 주변 버킷이 모두 채워져 있는 Primary Clustring 문제에 취약(빈 해시를 찾기 위해 계속해서 연산이 필요)
            - 제곱 탐색(Quadratic Probing)
                - 충돌 시 i의 제곱만큼씩 이동하여 빈 해시를 찾아 저장하는 방법(1 → 4 → 9 → 16 → ...)