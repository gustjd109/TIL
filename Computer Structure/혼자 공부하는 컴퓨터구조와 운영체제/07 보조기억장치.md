# 07 보조기억장치

## 1. 다양한 보조기억장치
1. 하드 디스크(HDD, Hard Disk Drive)
    - 하드 디스크란?
        - 자기적인 방식으로 데이터를 저장하는 보조기억장치 = 자기 디스크(magnetic disk)
        - 많은 양의 데이터를 저장하기 위해 여러 겹의 플래터로 이루어져 있고 플래터 양면을 모두 사용 가능
            - 양면 플래터 사용 시 위아래로 플래터당 두 개의 헤드가 사용됨<br><br>
    
    - 하드 디스크 구성
        - 플래터(platter)
            - 데이터가 저장되는 동그란 원판
            - 자기 물질로 덮여 있어 수많은 N극과 S극을 저장
                - N극과 S극을 0과 1의 역할을 수행
        - 스핀들(spindle)
            - 플래터를 회전시키는 구성 요소
            - 플래터를 회전시키는 속도는 분당 회전수를 나타내는 RPM(Revolution Per Minute)이라는 단위로 표현
                - RPM 15,000 = 1분에 15,000바퀴를 회전하는 하드 디스크
        - 헤드(head)
            - 플래터를 대상으롤 데이터를 읽고 쓰는 구성 요소
            - 플래터 위에서 미세하게 떠 있는 채로 데이터를 읽고 쓰는, 마치 바늘같이 생긴 부품
            - 원하는 위치로 헤드를 이동시키는 디스크 암(disk arm)에 부착됨<br><br>

    - 플래터의 데이터 저장
        - 트랙(track)과 섹터(sector)라는 단위로 데이터를 저장
            - 트랙 : 플래터를 여러 동심원으로 나웠을 때 그중 하나의 원
            - 섹터 : 트랙의 한 조각으로, 하드 디스크의 가장 작은 전송 단위(일반적으로 512바이트 크기)
            - 블록 : 하나 아상의 섹터 묶음
            - 실린더(cylinder) : 여러 겹의 플래터 상에서 같은 트랙이 위치한 곳을 모아 연결한 논리적 단위
        - 연속된 정보는 한 실린더에 저장
            - 디스크 암을 움직이지 않고 바로 데이터에 접근할 수 있음<br><br>

    - 저장된 데이터에 접근하는 과정
        - 하드 디스크가 저장된 데이터에 접근하는 시간
            - 탑색 시간(seek time) : 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간
            - 회전 지연(rotational latency) : 헤드가 있는 곳으로 플래터를 회전시키는 시간
            - 전송 시간(transfer time) : 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간<br><br>

    - 다중 헤드 디스크와 고정 헤드 디스크
        - 단일 헤드 디스크(single-head disk) : 플래터의 한 면당 헤드가 하나씩 달려 있는 하드 디스크 = 이동 헤드 디스크(movable-head disk)
        - 다중 헤드 디스크(multiple-head disk) : 헤드가 트랙별로 여러 개 달려 있는 하드 디스크 = 고정 헤드 디스크(fixed-head disk)
            - 트랙마다 헤드가 있어 탐색 시간이 들지 않음<br><br>

2. 플래시 메모리(flash memory)
    - 플래시 메모리란?
        - 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치
        - 다양한 곳에서 널리 사용하는 저장 장치로, ROM에도 사용
        - USB 메모리, SD 카드, SSD 등이 있음<br><br>

    - 두 종류의 플래시 메모리
        - NAND 플래시 메모리 : NAND 연산을 수행하는 회로(NAND 게이트)를 기반으로 만들어진 메모리
        - NOR 플래시 메모리 : NOR 연산을 수행하는 회로(NOR 게이트)를 기반으로 만들어진 메모리<br><br>

    - 플래시 메모리 데이터 저장 단위
        - 셀(cell) : 플래시 메모리에서 데이터를 저장하는 가장 작은 단위
        - 페이지(page) : 셀들이 모여 만들어진 단위
            - 읽기와 쓰기에 사용되는 단위
            - 페이지 상태
                - Free 상태 : 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
                - Valid 상태 : 이미 유효한 데이터를 저장하고 있는 상태
                    - 하드 데스크와는 달리 덮어쓰기가 불가능하여 Valid 상태인 페이지에는 새 데이터 저장 불가능
                - Invalid 상태 : 쓰레기값이라 부르는 유효하지 않은 데이터를 저장하고 있는 상태
                    - 쓰레기 값을 저장하고 있는 공간은 사용하지 않을 공간인데도 용량을 차지하여 용량이 낭비됨
                    - 쓰레기값을 정리하기 위해 가비지 컬력션 기능을 사용하여 유효한 페이지들만 새로운 블록으로 복사한 뒤, 기존의 블록을 삭제
        - 블록(block) : 페이지가 모여 만들어진 단위
            - 삭제에 사용되는 단위
        - 플레인(plane) : 블록이 모여 만들어진 단위
        - 다이(die) : 플레인이 모여 만들어진 단위<br><br>

## 2. RAID의 정의와 종류
1. RAID(Redundant Array of Independent Disks)란?
    - 데이터의 안전성 혹은 높은 성능을 위해 여러 개의 물리전 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술<br><br>

2. RAID의 종류
    - RAID 0
        - 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 구성 방식
        - 마치 줄무늬처럼 분산되어 저장된 데이터를 스트라입(stripe)이라고 하고, 분산하여 저장하는 것을 스트라이핑(striping)이라고 함
        - 데이터가 분산되어 저장(스트라이핑)되면 저장된 데이터를 읽고 쓰는 속도가 빨라짐
            - 4TB 저장 장치 한 개를 읽고 쓰는 속도보다 RAID 0로 구성된 1TB 저장 장치 네 개의 속도가 이론상 네 배가량 빠름
        - 저장된 정보가 않전하지 않음
            - 하드 디스크 중 하나에 문제가 생기면, 다른 모든 하드 디스크의 정보를 읽는 데 문제가 생길 수 있음<br><br>

    - RAID 1
        - 복사본을 만드는 방식 = 미러링(mirroring)
        - 어떠한 데이터를 쓸 때는 원본과 복사본 두 군데에 쓰기 때문에 쓰기 속도는 RAID 0보다 느림
        - 디스크 개수가 한정되었을 때 사용 가능한 용량이 적어짐 → 많은 양의 하드 디스크가 필요 → 비용이 증가
        - 복구가 매우 간단함
            - 똑같은 디스크가 두 개 있는 셈이니, 하나에 문제가 발생해도 읽어버린 정보를 금방 되찾을 수 있음<br><br>

    - RAID 4
        - RAID 1처럼 완전한 복사본을 만드는 대신 오류를 검출하고 복구하기 위한 정보(패리티 비트)를 저장한 장치를 두는 구성 방식
        - 패리티를 저장한 장치를 이용해 다른 장치들의 오류를 검출 및 복구 수행
        - RAID 1보다 적은 하드 디스크로도 데이터를 안전하게 보관 가능
        - 새로운 데이터가 저장될 때마다 패리티를 저장하는 디스크에도 데이터를 쓰게 되므로 패리티를 저장하는 장치에 병목 현상이 발생<br><br>

    - RAID 5
        - 패리티 정보를 분산하여 저장하는 방식으로 RAID 4의 문제인 병목 현상을 해소<br><br>

    - RAID 6
        - 기본적으로 RAID 5와 같으나, 서로 다른 두 개의 패리티를 두는 방식
        - 오류를 검출하고 복구할 수 있는 수단이 두 개가 생김으로써 RAID 4나 5보다 안전한 구성
        - 새로운 정보를 저장할 때마다 함께 저장할 패리티가 두 개이므로, 쓰기 속도는 RAID 5보다 느림<br><br>

    - Nested RAID
        - 여러 RAID 레벨을 혼합한 방식