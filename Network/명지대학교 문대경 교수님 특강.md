# 명지대학교 문대경 교수님 네트워크 개론 특강

## 1. 쉬어가는 코너
- 단어 뒤에 et, let를 붙이면, 작은 이라는 뜻이 된다.
    - pig-let
    - tabl-et
    - pack-et
    - snippet
        - snip은 가위로 잘라낸 것을 의미
        - -et를 붙인 형태인 snippet은 (잘라낸 것 같은)짧은 코드를 의미   
        <br/>
- memento pattern
    - memento의 사전적 의미 : 기념품
    - memento pattern이란?
        - 외부에서 그 의미를 알 수 없는(=opaque) 토큰으로 과거 상태로 돌아갈 수 있는 패턴
        - 마치 내 여행 기념품은 남들에게는 아무 느낌도 없지만, 나는 그 것을 보며 과거를 회상 할 수 있는 것

## 2. 네트워크(network)
- 네트워크란(network)?
    - 개체('점') 간의 관계('선')을 표시한 것   
    <br/>
- 네트워킹(networking)이란?
    - 개체('점') 간의 관계를 맺게 하는 것   
    <br/>
- 네트워크 예시
    ```
    - 신경망(neural network) : 뉴런 + 시냅스
    - 사회 관계망 or 인맥(social network) : 사람 + 친분관계
    - 철도망(rail transport network) : 기차역 + 선로
    - 도로망(road network) : 지역, 도시 + 도로
    - 전력망(power grid) : 전력 설비(발전소, 변선소) + 전력선
    - 회로망(electrical network) : 저하, 캐패시터 등 + 전선
    - 컴퓨터망(computer network) : 컴퓨터 _ 랜선
    ```

## 3. The Internet
- inter-
    - inter-의 사전적 의미 : ~사이에
    - inter-가 쓰인 단어 예시    
        - inter-view
        - inter-national
        - inter-continental ballistic missile(ICBM)
        - inter-stellar   
        <br/>
- Inter-net(work)
    - (점들을 선으로 연결한) 덩어리 간의 연결 = inter-(사이) + network(점들을 선으로 연결한 덩어리)
    - 인터넷의 올바른 영어 표기 : the Internet   
    <br/>
- IP(Internet Protocol)
    - 네트워크를 연결하는 프로토콜
        - 즉, 네트워크들이 서로 연결되기 위해서 사용되는 규약   
        <br/>
- The Internet의 목표
    ```
    - Fundametal Goal
        - 미 국방부에서 지원
            - 기존에 보유하고 있던 ARPANET이라는 네트워크와 ARPA라는 패킷 라디오 네트워크를 연결하자는 것에서 시작
    - Second Level Goals
        - 구성하는 네트워크 중 일부가 동작하지 않아도 계속 작동해야 함
        - 다양한 통신 서비스 지원
        - 다양한 네트워크 수용 가능
        - 중앙집중식이 아닌 분산처리 방식의 자원 관리
        - 비용 효율적
        - 적은 비용으로 호스트 추가 가능
        - 누가 어느 정도 리소스를 쓰는지 추적 가능    
    ```
    - Second Level Goals에서의 마지막 목표에 대해 우리는 누가 얼마나 트래픽을 사용하는지 알 수 있는가?
        - IP를 보면 알 수 있지 않을까?
            - IP 주소는 임의로 부여된 숫자이므로 그 주소를 조작하면 누가 얼마나 리소스를 사용하는지 모른다.
            - 그래서, 우리가 겪는 문제 중 하나인 디도스 공격을 받았을 때 추적이 힘들다.
            - 인터넷을 만든 사람들이 해당 목표를 별로 중요하게 생각하지 않고 설계를 했기 때문에다.

## 4. 아키텍처
- 아키텍처의 의미 : 구조   
<br/>
- 다음을 결정하는 것이 아키텍처를 설계하는 것
    - 어떤 컴포넌트가 존재하는가?
    - 컴포넌트들은 서로 어떻게 상호 작용하는가?   
    <br/>
- 아키텍처 스타일 예시
    ```
    - 계층형
    - 이벤트 기반
    - MVC
    - 파이프 필터
    - Client-server 형
    - Peer to peer(P2P) 형
    - 마이크로 서비스
    ```   
    <br/>
- 계층형 아키텍처
    - 구현 방법
        - 하나의 큰 덩어리 구현(monolithic)
        - 작은 기능을 쌓아올리는 구현(layered)
    - 계층화(layering)의 장점
        - 단순화
            - 각 계층은 자기가 제공할 기능만 생각하면 된다.(functionality)
            - 각 계층은 자기 바로 아래 계층을 어떻게 쓰는지만 알면 된다.(interface)
        - 문제 해결의 편의성
            - 문제가 있는 계층만 디버깅하면 된다.
            - 각 계층이 단순하기 때문에 문제를 해결하기도 쉽다.
        - 진화의 편의성
            - 각 계층은 바로 위 계층에 알려준 "어떻게 쓰는지"만 유지하면 된다.
            - 그 안에서 자유롭게 기능을 개선/추가 할 수 있다.
            - 컴퓨터 공학의 격언 : 계층 추가하면 뭐든 쉽게 해결 가능
    - 계층화의 단점
        - 잠재적 비효율성
            - 각 계층을 넘나드는 것이 비효율적일 수 있다.
            - 바로 아래 계층이 아니라 아래아래 계층처럼 계층을 건너뛰어야 될 때 괴롭다.
            - 어떤 계층을 건드리면 그 것을 사용하는 그 위의 모든 계층이 영향을 받는다.   
            <br/>
- 계층화에서의 황금률
    - 꼭 필요한 것이 아니면 하위 계층을 넣지 마라

## 5. OSI 7계층 모형(OSI Reference Model)
<img src="https://velog.velcdn.com/images%2Fcgotjh%2Fpost%2F52907c8c-c149-4943-ad21-3996f44f912f%2F995EFF355B74179035.jpg"></img>
- OSI 7계층이란?
    - 말그대로 참조 모델이다.
    - 즉, 실제 구현으로 존재하는 것이 아니다.
    - 대신 우리가 계층 구조를 만들 때 기준이 됨을 의미한다.
    - 간혹 OSI 7계층 모델을 "아무도 안 쓰는 무의미 한 것"으로 펌하하는 사람들이 있는데 잘 못 이해한 것이다.   
    <br/>
- 계층 구조에서 데이터 처리
    - 보내는 쪽 : 보내는 사람, 받는 사람을 기재한 더 큰 박스에 넣는다.
    - 전송 : 최종의 박스(제일 큰 거) 를 보낸다. 이 때 박스의 받는 사람 정보를 참조해서 전송한다.
    - 받는 쪽 : 바깥쪽 박스를 제거하고, 작은 박스를 꺼내 위 계층에 전달한다.
    - 실제로는 데이터를 보낼 때 데이터 앞에 헤더를 붙여서 전송한다.   
    <br/>
- 컴퓨터 네트워크 각 계층의 주소 요소
    - Network Access : MAC
    - Internet : IP
    - Host to Host Transport : Port   
    <br/>
- 계층 구조에서 데이터 처리 TCP/IP 예시
    - 패킷이 있다고 가정하자.
    - 패킷을 TCP segment로 전송한다.
    - TCP는 Port 정보를 헤더에 넣고, 데이터에 붙여서 IP datagram로 전송한다.
    - IP datagram은 IP 정보를 헤더에 넣고, 데이터에 붙여서 Ethernet frame으로 전송한다.
    - Ethernet frame은 MAC 정보를 헤더에 넣고, 데이터에 붙인다.   
    <br/>
- 그러면, Port/IP/MAC은 어떻게 알고 쓰는 것일까?
    - Port : Port 번호는 정해놓고 사용하며, 다른 곳에서 사용 중이라면 피해서 사용한다.
    - IP : 정해진 IP 주소를 써도 되지만, 서버 이름으로부터 IP 주소를 찾아서 사용한다.   
    <br/>
- 서버 이름에서 IP 주소 찾는 방법
    - 사람에게는 숫자 나열보다 이름이 기억하기 더 쉽다.
    - 하지만 the Internet 은 IP로 통신한다.
    - 그렇다면 이름과 IP 주소를 매칭해서 기억하고 있으면 어떨까? 그리고 필요할 때 주어진 이름에서 IP 를 찾아서 알려주는 것이지.
    - DNS : 이름과 IP 주소르 매칭해서 필요할 때 주어진 이름으로부터 IP를 찾아서 알려주는 서비스이다.
    - DNS 서버 : 서버 이름과 IP 매칭을 기억하는 저장소이며, 누군가 서버 이름가지고 IP 를 물어보면 대답해주는 역할을 한다.
    - DNS resolution : 서버 이름으로부터 IP 를 알아내는 행동   
    <br/>
- DNS 서버가 잘 못 되면 어떻게 될까?
    - DNS 이름에서 IP로 바꾸는 과정에서 실패한 것이다.
    - IP로 직접 들어가면 되지만, 일반인들을 IP 주소를 외우고 있지 않다.   
    <br/>
- DNS 서버는 어떻게 동작하는가?
    - 우리가 Wifi 같은 곳에 접속을 하게 되면, 지정해준 네임서버를 사용하게 된다.
    - 내가 jungle.krafton.com 주소를 알고 싶다고 하면, DNS는 뒤에서부터 찾는다.
    - .com이라는 네임서버를 누가 관리하는지 root 네임서버에 물어보면, root 네임서버는 어디에 있는지 알려준다.
    - krafton.com이라는 네임서버를 누가 관리하는지 TLD.com 네임서버에 물어보면, TLD.com 네임서버는 어디에 있는지 알려준다.
    - jungle.krafton.com이라는 네임서버를 누가 관리하는지 krafton.com 네임서버에 물어보면, krafton.com 네임서버는 어디에 있는지 알려준다.
    - 최종적으로 jungle.krafton.com의 정보를 받아온다.
    - 왜 뒤에서부터 찾을까?
        - 미국은 성을 뒤에 쓰기 때문에 뒤에서부터 찾는다.   
        <br/>
- DNS 서버 동작 속도는 어떤가?
    - DNS resolution은 iterative한 작업이다.
    - root 와 Top-Level-Domain(TLD)을 담당하는 서버는 엄청난 부하를 받으므로 resolution까지 많은 시간이 걸린다.
    - 따라서, DNS는 실제로 캐싱된 결과를 사용한다.   
    <br/>
- DNS Cashing
    - 캐시는 응답할 정보를 미리 저장해 놓는 것으로, 자주 바뀌는 데이터는 캐싱에 적합하지 않다.
    - DNS record는 빈번히 바뀌는 정보가 아니므로 캐싱에 적합하다.
    - 캐싱을 통해 high scalability & low latency 둘 다 이룰 수 있다.
        - 예: root NS 캐싱, TLD NS 캐싱, 개별 도메인의 NS 캐싱, DNS 쿼리 결과 캐싱   
        <br/>
- IP에서 MAC 알아내는 방법
    - IP는 네트워크를 연결한다.
    - 즉, IP보다 아래에 있는 MAC은 한 네트워크 안에서만 동작한다.
    - 그렇다면 MAC 필요할 때, 네트워크에 “이 IP 주소 쓰는 사람은 MAC 알려줘” 라고 그냥 전체 방송(broadcast)을 통해 찾는다.
    - ARP : 이런 절차를 위한 프로토콜   
    <br/>
- Gateway
    - Gateway의 의미 : 입출입을 위한 관문
    - 네트워크 세상에서는 내 네트워크의 입출입을 위한 관문 서버다.   
    <br/>
- 네트워크 연결 프로토콜인 IP
    - 다른 네트워크에 접속하려고 한다면, 내 네트워크 게이트웨이에게 던져놓고 맡긴다.
    - 내 게이트웨이는 또 다음으로 던지고, 이 과정을 계속 반복한다.
    - IP : Hob-by-Hop Network
        - 한 단계씩 내 게이트웨이로 보내고, 또 다시 내 게이트웨이는 다른 게이트웨이로 보내고, 다른 게이트웨이는 해당 정보를 담당하는 곳으로 한 단계씩 또 보낸다.
    - 만약, 게이트웨이끼리 연결이 되어 있지 않을 때는 어떻게 찾아서 보낼까?
        - Routing과 Forwarding을 통해 길을 찾아 보낸다.   
        <br/>
- Routing과 Forwarding
    - Routing
        - Route + -ing
        - 길찾기 : 내가 어떤 선택 가능한 경로들을 가지고 있나?
        - 데이터 전송의 본질적인 부분이 아닌, 콘트롤의 영역(control plane)
    - Forwarding
        - Forward + -ing
        - 전송하기 : 선택 가능한 경로 중 하나를 골라서 보낸다.
        - 데이터 전송의 본질적 영역(data plane)
        - 목적지에 따라 골라서 보내기 때문에 Switching 이라고도 한다.   
        <br/>
- Domain간 사용할 경로 결정
    - Domain : 서로 다른 관리 주체의 네트워크 또는 Autonomous System(AS)
        - 관리 주체가 다른 도메인 간의 트래픽 이동 경로를 선택한다.
    - 단순히 빠르다고 경로를 선택하지 않는다.
        - 미국이 EU 와 통신하고 싶은데 북한을 경유하고 싶을까? / 빠르다고 하더라도 가격이 너무 비싸다면?
    - Inter-domain간 routing은 “정책 기반”(policy-based)으로 경로를 선택한다.
    - 즉 단순히 속도, hop 수 등의 수치(metric)를 따르지 않고 정책이 그것을 override하게 한다.   
    <br/>
- Routing에서의 Lesson
    - 인터넷은 복잡하게 얽혀 있으므로, 통신 중간중간에도 서로 다른 경로가 선택될 수 있다.
        - 이것을 latency라고 하며, latency가 바뀌는 정도를 jitter라고 한다.
    - 특히 inter-domain간의 통신은 빠르다고 선택되는 것이 아니라 주어진 정책에 가장 부합하는 경로를 선택한다.
    - Latency가 지리적 거리와 어느 정도 부합하지만 꼭 그런 것은 아니다.   
    <br/>
- Latency vs Jitter
    - Latency(Network delay, A.K.A 딜레이)
        - 송신자가 보낸 데이터가 얼마만에 수신자에게 도달하는가?
        - ping을 찍었을 때 나오는 시간이 latency다.
    - Jitter
        - Latency의 변화 정도
    - Interactive(상호작용하는, 대화형의)한 서비스에 미치는 영향
        - Latency : 반응이 늦게 온다는 느낌을 줌
        - Jitter : 자꾸 튄다는 느낌을 줌
        - 반응이 늦게오지만, 일관되게 늦게 온다면 jitter는 낮고 latency가 높은 것이다.
        - 반응은 빠른데 중간에 튄다면 latency는 낮은데 jitter가 높은 것이다.
        - 그렇다면 뭐가 더 안정적일까?
            - jitter가 낮은게 stable하다.
        <br/>
- Jitter 계산 방법
    - Latency data points간의 차이에 대한 평균값으로 계산
    - Latency가 36, 36, 37, 38 msec 인 경우
    - |36 – 36| = 0
    - |36 – 37| = 1
    - |37 – 38| = 1
    - (0 + 1 + 1) / 3 = 0.67msec

## 6. Ethernet, UDP, TCP, IP
- 


오타 : 여러 개의 프레임으로 쪼개져서 전송된다.