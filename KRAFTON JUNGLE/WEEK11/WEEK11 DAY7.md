# WEEK11 DAY7 TIL

## 1. μ¤λμ ν•™μµ λ©λ΅
```
1. ν•€ν† μ¤ ν”„λ΅μ νΈ3 μ§„ν–‰
    - Swap In/Out κ³Όμ  κµ¬ν„
    - κ°λ… μ •λ¦¬
    - λ°ν‘ μ¤€λΉ„
```

## 2. 11μ£Όμ°¨ 7μΌμ°¨ ν•€ν† μ¤ ν”„λ΅μ νΈ 3λ¥Ό λ§μΉλ©°...
μ¤λ μ•„μΉ¨μ— μΌμ–΄λ‚μ„ ν…μ¤νΈ λλ ¤λ΄¤λ”λ° μ΄μ λ” κ·Έλƒ¥ swap-forkμ—μ„ ν„°μ Έμ„ ν…μ¤νΈκ°€ κ³„μ† μ‹¤ν¨ν•λ‹¤.  
μ§„μ§ μ•„μΉ¨λ¶€ν„° λ…ΈνΈλ¶ λμ§ λ»”ν–λ‹¤...π΅  

ν…μ¤νΈ μ‹¤ν–‰ μ‹, swap-forkκ°€ ν„°μ§€λ©΄μ„ μ•„λ μ¤λ¥κ°€ λ°μƒν•λ‹¤.  
Kernel panic in run: PANIC at ../../threads/thread.c:330 in thread_yield(): assertion `!intr_context ()' failed.  
thread_yield() ν•¨μμ—μ„μ ASSERT (!intr_context ()) λ¶€λ¶„μ—μ„ λ¬Έμ κ°€ λ°μƒν•λ” κ²ƒ κ°™λ‹¤.  
intr_context() ν•¨μλ” μ™Έλ¶€ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ μ¤‘μΌ λ•λ” trueλ¥Ό λ°ν™ν•κ³ , μ•„λ‹λ©΄ falseλ¥Ό λ°ν™ν•λ” ν•¨μλ‹¤.  
μ¦‰, μ™Έλ¶€ μΈν„°λ½νΈκ°€ λ“¤μ–΄μ¤λ©΄ ν…μ¤νΈμ—μ„ FAILμ΄ λ°μƒν•λ” κ²ƒμ΄λ‹¤.  
λ”°λΌμ„, μ™Έλ¶€ μΈν„°λ½νΈκ°€ μ•„λ‹ λ•λ§ thread_yield() ν•¨μλ¥Ό μ‹¤ν–‰ν•λ„λ΅ μ½”λ“λ¥Ό μμ •ν•μ—¬ λ¬Έμ λ¥Ό ν•΄κ²°ν–λ‹¤.  
```C
/* ready_listμ—μ„ μ°μ„ μμ„κ°€ κ°€μ¥ λ†’μ€ μ¤λ λ“μ™€ ν„μ¬ μ¤λ λ“μ μ°μ„ μμ„λ¥Ό λΉ„κµν•λ” ν•¨μ */
void test_max_priority (void) {
	// Ready_listκ°€ λΉ„μ–΄μμ§€ μ•κ³ , ready_listμ—μ„ μ°μ„ μμ„κ°€ κ°€μ¥ λ†’μ€ μ¤λ λ“λ³΄λ‹¤ ν„μ¬ μ¤λ λ“μ μ°μ„ μμ„κ°€ λ” μ‘μ€ κ²½μ°
	if(!list_empty (&ready_list) && ((thread_current ()->priority) < (list_entry(list_front (&ready_list), struct thread, elem)->priority))) {
		if (!intr_context()) {
			thread_yield (); // thread_yield() ν•¨μλ¥Ό νΈμ¶ν•μ—¬ ν„μ¬ μ¤λ λ“μ CPUλ¥Ό μ–‘λ³΄
		}
	}
}
```

μ•„λ 4κ°μ ν…μ¤νΈ μΌ€μ΄μ¤λ” κ°„ν—μ μΌλ΅ μ‹¤ν¨ν•λ” μΌ€μ΄μ¤μΈλ°, κ²°κµ­ μ›μΈμ„ μ•μ§€ λ»ν•΄ ν•΄κ²°ν•μ§€ λ»ν•΄μ„ λ§μ΄ μ•„μ‰½λ‹¤...  
FAIL tests/vm/page-merge-par  
FAIL tests/vm/page-merge-stk  
FAIL tests/vm/page-merge-mm  
FAIL tests/filesys/base/syn-read

λ‚΄μΌμ€ ν”„λ΅μ νΈ3 λ°ν‘κ°€ λλ‚κ³ , ν”„λ΅μ νΈ 4κ°€ μ‹μ‘λλ” λ‚ μ΄λ‹¤.  
μΌμ£ΌμΌλ°–μ— μ‹κ°„μ΄ μ—†μ–΄μ„ κ°λ… κ³µλ¶€ λ° κµ¬ν„ν•λ” λ° μ λ€μ μΌλ΅ μ‹κ°„μ΄ λ¶€μ΅±ν•  κ²ƒ κ°™μ§€λ§, μµλ€ν• μ—΄μ‹¬ν ν•  μ μλ” λ°κΉμ§€ ν•΄λ³Ό μƒκ°μ΄λ‹¤.π€