# WEEK07 DAY7 TIL
- 오늘의 학습 목록
```
1. PintOS 발제
2. 티타임 참석
3. 협력사 니어스랩 채용설명회 참석
4. PintOS 리포지토리 생성 및 설정
5. PintOS GitBook 읽기(Understanding Threads, Synchronization 초반)
```

## 1. PintOS 발제
1. 카이스트 GitBook 읽기
    - 모든 내용을 다 읽을 필요는 없으며, 아래 항목에 대한 내용을 읽는 것을 권장
        - Introduction
            - Getting Started
            - Building Pintos
            - Running Pintos
            - 위 내용은 노션에 모두 있는 내용으로 노션의 내용을 읽어도 상관 없음
        - PROJECT1 : THREADS
            - Introdiction
                - Understanding Threads
                - Synchronization
        - Alarm Clock
        - Priority Scheduling
        - APPENDIX
            - Threads
            - Synchronization<br><br>
2. 권영진 교수 OS 강의
    - 원격으로 강의 진행
    - 일정
        - 6/3(토), 오후 2시~4시
        - 6/9(금), 오전 10시 30분~12시 30분<br><br>
3. 카이스트 핀토스 강의 슬라이드 및 유트브 참고
    - 슬라이드와 유튜브에 과제를 진행하는 데 필요한 정보 및 힌트가 있는 듯 -> 오늘 잠깐 봤을 때 그런 느낌을 받음<br><br>
4. 각 프로젝트 별 욥션사항(Extra)
    - PROJECT1 : Advanced Scheduler와 CondVar
        - CondVar는 독립적으로 팀원과 같이 작업을 안해서 할 수 있는 과제로 해보는 것을 권장<br><br>
5. Q&A 채널 활용
    - PintOS 프로젝트가 어려운 만큼 카이스트 학생 조교들로 구성된 Q&A 채널을 운영하고 있다.
        - 미리 질문하면, 코치나 조교가 확인 후 주중 오전에 답변을 남길 계획<br><br>
6. CSAPP 교재 매핑
    - Chapter 3. Machine-Level Representation of Programs
    - Chapter 12. Concurrent Programming<br><br>
7. 코치님 조언
    - 책(이론)을 너무 딥하게 파지말고, 바로 뛰어들어라
    - 집어준 곳만 빠르게 읽고 작업에 들어가라
        - 모르는 게 있을 때 추가로 공부하는 것을 권장
    - 팀원이 함께 집중해서 개발할 수 있는 시간을 정해서 진행해라
    - 5, 6, 7주차 과제는 어느정도 코드를 참고하고 진행했었지만, PintOS 프로젝트 만큼은 코드를 참고하지 말고 꼭 직접 개발해봐라
        - 3만 라인이나 되는 코드를 혼자서 핸들링할 수 있는 기회가 많지 않다.
        - 신입으로 입사해서 이렇게 코드를 바로 건들 수 있는 기회가 주어지기까지 시간이 걸린다. -> 잘 못 건들면 큰일나기 때문이다...(특히, 핵심 기능 망가지면?!)

## 2. 티타임
중간에 게임랩 주제로 진행되서 특별하게 적을 내용 없음

## 3. 협력사 니어스랩 채용설명회
정영석(CTO & Co-founder)님께서 채용 설명회를 진행해주셨고, 정리한 내용은 다음과 같다.

### 1. 니어스랩은 어떤 사업을 하는 회사인가?
1. 자율 비행 드론 스타트업
    - 드론으로 세상에 새로운 시각을 더한다라는 시각을 가지고 시작
    - 풍력발전기 점검 및 데이터 수집 및 분석을 시작으로 사업 지작
        - 위험한 시설물 안전점검을 아직도 사람이 직접 수행(위험하고 비쌈)
        - 작업자가 종이에 수기 기록하는 등 굉장히 올드하게 일을 수행하고 있음
        - 이런 문제를 해결해주고 드론으로 빠르게 점검, 웹 서비스, AI 기술력을 바탕으로 디지털 트랜스포매이션 할 수 있다 생각함
    - 시설물 안전점검을 수행하는 AI 드론 + 데이터 포털 사이트를 운영
        - 데이터를 취득하는 NearthWIND + 데이터로 가치를 만드는 Zoomable(데이터 관리 웹 서비스)
    - 교량, 댐, 산불 감시 등으로 사업 확대할 계획
    - 해상 풍력 시작이 커짐
    - 현재 드론 무게 9kg -> 배터리 빼면 3kg 600g

### 2. 드론 스타트업에서는 SW개발자가 무슨 일을 하는가?
1. 앱 개발
    - 드론을 조정할 수 있는 앱 개발을 진행(앱은 현재 개발되어 사용되고 있음)
    앱으로도 드론 조정 가능하기때문에 앱개발자도 있음<br><br>
2. Zoomable(데이터 관리 웹 서비스) 개발
    - 엄청 큰 사진을 줌인 줌아웃하면서 사진을 볼 수 있고 관리해주는 웹 서비스
        - 사용 스택 : js, aws 등
    - 문제가 있는 제품의 사진은 상위에 숫자를 통해 알려주는 기능도 있음
    - 년도별로 사진을 찍으면 비교 가능을 통해 부식, 손상 등의 정보를 알 수 있음
    - 차후에는 수리 워크 오더를 내려주는 과정까지 할 수 있도록 발전할 예정<br><br>
3. 전체 구성 인원
    - series C까지 작년에 투자 유치를 받은 상황
    - 절반 이상의 다양한 엔지니어로 구성
    - 약 80여명<br><br>
4. 개발팀 구성
    - 플랫폼(앱 개발 포함), 웹서비스(정글 출신 개발자들이 대부분 이 팀에 있음), 퍼셉션(딥러닝, AI)
    - 정글 출신들은 플랫폼, 웹서비스 팀에 주로 지원하고 뽑음<br><br>

### Q&A
- 회사에서 개발자 성장을 위해 지원해주는 제도가 있는가?
    - 각 팀별로 알아서 스터디를 진행하고 있음
- 신입으로 지원했을 때 특별하게 보는것이 있는지?
    - 얼마나 잘 성장할 수 있고 배울 의지가 있는지를 봄

## 4. PintOS PROJECT1 진행
1. PintOS 리포지토리 생성 및 설정
    - PintOS PROJECT1, 2를 진행하기 위해 리포지토리 생성
    - default 브랜치 master 브랜치로 변경
    - 팀원 pintOS 리포지토리 초대<br><br>
2. PintOS GitBook 읽기
    - Understanding Threads
        - 첫 번째 단계는 initial thread system의 코드를 읽고 이해하는 것입니다. 핀토스는 이미 thread creation, thread completion, thread switch를 위한 간단한 스케쥴러와 synchronization primitives(semaphores, locks, condition variables, and optimization barriers)를 구현해 놓았습니다.<br><br>
        - 이 코드 중 일부는 약간 이상하게 보일 수 있습니다. 원한다면, 거의 모든 곳에 printf()를 추가하여 어떤 일이 일어나는지, 어떤 순서로 진행되는지 확인할 수 있습니다. 또한, 디버거에서 커널을 실행하거나 궁금한 지점에 중단점를 설정해서 코드를 단계별로 실행할 수도 있습니다.<br><br>
        - 스레드가 생성되면, 스케쥴될 새 context가 생성됩니다. 이 context에 실행될 함수는 thread_create()의 인수로 넣어서 context에 제공할 수 있습니다. 스레드가 처음 스케쥴되고 실행되면, 스레드는 새로 생성된 context 내에서 thread_create()로 들어간 함수의 시작 부분부터 실행됩니다. 함수가 반환되면 스레드가 종료됩니다. 따라서 각 스레드는 핀토스 내에서 thread_create()의 인자로 들어간 함수가 main() 함수 역할을 하는 미니 프로그램과 같다고 볼 수 있습니다.<br><br>
        - 주어진 시간에 정확히 한 개의 스레드가 실행되고, 나머지 스레드(있는 경우)는 비활성화됩니다. 스케쥴러는 다음에 실행할 스레드를 결정합니다.(지정된 시간에 실행할 준비가 된 스레드가 없으면, idle()에 구현된 특별한 idle 스레드가 실행됩니다.) synchronization primitives는 한 스레드가 다른 스레드가 어떤 작업을 수행할 때까지 기다려야 할 때 context switch를 강제할 수 있습니다.<br><br>
        - Context switch의 메커니즘은 threads/thread.c의 thread_launch()에 있습니다(이해할 필요는 없습니다). 현재 실행 중인 스레드의 상태를 저장하고 바꾸려고 하는 스레드의 상태를 복원합니다.<br><br>
        - GDB 디버거를 사용하여 context switch를 천천히 추적하여 결과를 확인합니다. schedule()에 중단점을 설정하여 시작한 다음 여기서 한 단계씩 수행할 수 있습니다. 각 스레드의 주소와 상태, 각 스레드에 대한 호출 스택의 절차를 추적해야 합니다. 한 스레드가 do_iret()에서 iret를 실행하면 다른 스레드가 실행되기 시작합니다.
        - 주의 : 핀토스에서는 각 스레드에 크기가 4KB 미만인 작은 고정 크기의 실행 스택이 할당됩니다. 커널은 스택 오버플로우를 탐지하려고 하지만 완벽하게 탐지할 수 없습니다. 큰 데이터 구조를 intbuf[1000];와 같이 non-static local 변수로 선언하면 알 수 없는 kernel panics과 같은 이상한 문제가 발생할 수 있습니다. stack allocation 대신 page allocator와 block allocator가 있습니다.<br><br>
        - 동기화 기초 요소(synchronization primitives)
            - 스레드 동기화 또는 프로세스 동기화를 지원하기 위한 목적으로 OS와 같은 플랫폼으로 유저에게 제공하는 간단한 소프트웨어 매커니즘
            - 보통은 low level 매커니즘으로 atomic 연산, 메모리 경계, spinlock, context switch 등을 포함하는 개념
            - 흔히 아는 mutex, event, conditional variables, semaphore 같은 것들도 synchronization primitives라고 할 수 있음<br><br>

## 5. 7주차 7일차를 마치며...
구현한 WebProxy에 대한 코드 리뷰를 마치고, 바로 대망의 PintOS 발제를 시작했다. 거대한 벽이라고 한 만큼 역시나 학습해야 할 방대한 양의 이론과 어디서부터 시작해야 할지 갈피를 잡지 못했다.  
갈피를 잡지 못한 이유 중 하나가 모든 자료가 영어로 되어있다는 게 가장 큰 것 같다...(해석이 않되요...😭)  
그래도 코치님께서 조언해 주신 대로 너무 많은 시간을 이론 공부하는 데 사용하지 말고, 팀원들과 계획을 잘 세워서 차근차근 하나씩 하다 보면 해결할 수 있을 것이라는 생각을 갖고 열심히 해야겠다.🔥  

오늘 티타임은 중간부터 게임랩 주제로 진행되다 보니 다양한 주제에 관해서 이야기를 나누지 못해 아쉬웠다.  

티타임을 마치고 나서 일찍 저녁을 먹고 협력사인 니어스랩 채용설명회에 참석했다.  
학부생 때부터 AI에 어느 정도 관심을 두고 있었는데 AI 기술을 다루는 회사에서 석박사가 아닌 학부 졸업을 한 신입이 어떤 팀에서 어떤 업무를 수행하는지 구체적으로 알 기회가 됐다.  

늦었지만, 오후 늦게부터는 본격적으로 PintOS 과제를 시작했고, PintOS GitBook을 읽는 것으로 시작했다.  
많은 내용을 학습하지는 못해서 내일 좀 더 집중해서 최대한 많은 내용을 학습하여 PintOS를 구현하는 시간을 최대한 확보해야 할 것 같다.